<style>
	.slides {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 100%;
		height: 100%;
		overflow: hidden;
	}
	.slides img {
		max-width: 95%;
		max-height: 95%;
		object-fit: contain;
	}
</style>

<img src="" alt="" />

<script>
	(function () {
		const prefix = '{{.PREFIX}}';
		const img = frame().querySelector('img');
		let slides = [];
		let index = pathless.read()[prefix] || 0;

		function show(i) {
			if (!slides.length) return;
			index = ((i % slides.length) + slides.length) % slides.length;
			pathless.write(prefix, index);

			const slide = slides[index];
			img.src = `data:${slide.Type};base64,${slide.Data}`;
			img.alt = slide.Name;
		}

		pathless.fetch(`${window.apiUrl}/${prefix}`).then((data) => {
			slides = data || [];
			if (slides.length) show(index);
		});

		onKey('a', () => show(index - 1), '←');
		onKey('d', () => show(index + 1), '→');
	})();
</script>
